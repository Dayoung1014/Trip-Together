<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edu.ssafy.enjoytrip.planDetail.model.mapper.PlanDetailMapper">

	<resultMap type="planDetailDto" id="PlanDetail">
		<result column="plan_id" property="planId"/> 
		<result column="detail_id" property="detailId"/>  
		<result column="data_num" property="dataNum"/> 
		<result column="route" property="route"/>  
	</resultMap>
	
 	<select id="getRouteList" parameterType="String" resultMap="PlanDetail">
		select *
		from plan_detail
		where plan_id = #{planId} and route is NULL;
	</select>
 
  	<select id="getPlanDetail" parameterType="String" resultMap="PlanDetail">
		select *
		from plan_detail
		where plan_id = #{planId} and data_num = #{dataNum} and route is #{route};
	</select>
 
 
   	<select id="getPlanDetailById" parameterType="String" resultMap="PlanDetail">
		select *
		from plan_detail
		where detail_id = #{detailId};
	</select>
	
	<select id="listPlanDetail" parameterType="String" resultMap="PlanDetail">
		select *
		from plan_detail
		where plan_id = #{planId};
	</select>
	
	
	<insert id="writePlanDetai" parameterType="planDetailDto">
		insert into plan_detail (plan_id, data_num, route)
		values (#{planId}, #{dataNum}, #{route})
	</insert>
 
	
	<update id="modifyPlanDetail" parameterType="planDetailDto">
		update plan_detail
		<trim prefix="set" suffixOverrides=",">
			<if test="route != null">route = #{route},</if> 
		</trim>
		where detail_id = #{detailId}
	</update>
	
	<delete id="deletePlanDetail" parameterType="String">
		delete from plan_detail
		where detail_id = #{detailId};
	</delete>
</mapper>